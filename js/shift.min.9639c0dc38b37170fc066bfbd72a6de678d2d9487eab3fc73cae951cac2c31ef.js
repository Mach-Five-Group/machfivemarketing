"use strict";const circleCount=150,circlePropCount=8,circlePropsLength=circleCount*circlePropCount,baseSpeed=.1,rangeSpeed=1,baseTTL=150,rangeTTL=200,baseRadius=100,rangeRadius=200,rangeHue=60,xOff=.0015,yOff=.0015,zOff=.0015,backgroundColor="hsla(0,0%,5%,1)";let container,canvas,ctx,circles,circleProps,simplex,baseHue;function setup(){createCanvas(),resize(),initCircles(),draw()}function initCircles(){circleProps=new Float32Array(circlePropsLength),simplex=new SimplexNoise,baseHue=20;let e;for(e=0;e<circlePropsLength;e+=circlePropCount)initCircle(e)}function initCircle(e){let t,n,i,s,o,a,r,c,l,d,u;t=rand(canvas.a.width),n=rand(canvas.a.height),i=simplex.noise3D(t*xOff,n*yOff,baseHue*zOff),s=rand(TAU),o=baseSpeed+rand(rangeSpeed),a=o*cos(s),r=o*sin(s),c=0,l=baseTTL+rand(rangeTTL),d=baseRadius+rand(rangeRadius),u=baseHue+i*rangeHue,circleProps.set([t,n,a,r,c,l,d,u],e)}function updateCircles(){let e;baseHue++;for(e=0;e<circlePropsLength;e+=circlePropCount)updateCircle(e)}function updateCircle(e){let r=1+e,p=2+e,f=3+e,l=4+e,m=5+e,h=6+e,u=7+e,n,s,a,c,t,i,o,d;n=circleProps[e],s=circleProps[r],a=circleProps[p],c=circleProps[f],t=circleProps[l],i=circleProps[m],o=circleProps[h],d=circleProps[u],drawCircle(n,s,t,i,o,d),t++,circleProps[e]=n+a,circleProps[r]=s+c,circleProps[l]=t,(checkBounds(n,s,o)||t>i)&&initCircle(e)}function drawCircle(e,t,n,s,o,i){ctx.a.save(),ctx.a.fillStyle=`hsla(${i},60%,30%,${fadeInOut(n,s)})`,ctx.a.beginPath(),ctx.a.arc(e,t,o,0,TAU),ctx.a.fill(),ctx.a.closePath(),ctx.a.restore()}function checkBounds(e,t,n){return e<-n||e>canvas.a.width+n||t<-n||t>canvas.a.height+n}function createCanvas(){container=document.querySelector(".content--canvas"),canvas={a:document.createElement("canvas"),b:document.createElement("canvas")},canvas.b.style=`
		position: relative;
		top: 0;
		left: 0;
		width: 100%;
		height: calc( 100vh - 50px);
	`,container.appendChild(canvas.b),ctx={a:canvas.a.getContext("2d"),b:canvas.b.getContext("2d")}}function resize(){const{innerWidth:e,innerHeight:t}=window;canvas.a.width=e,canvas.a.height=t,ctx.a.drawImage(canvas.b,0,0),canvas.b.width=e,canvas.b.height=t,ctx.b.drawImage(canvas.a,0,0)}function render(){ctx.b.save(),ctx.b.filter="blur(50px)",ctx.b.drawImage(canvas.a,0,0),ctx.b.restore()}function draw(){ctx.a.clearRect(0,0,canvas.a.width,canvas.a.height),ctx.b.fillStyle=backgroundColor,ctx.b.fillRect(0,0,canvas.b.width,canvas.b.height),updateCircles(),render(),window.requestAnimationFrame(draw)}window.addEventListener("load",setup),window.addEventListener("resize",resize)